import"../chunks/Bzak7iHL.js";import{ay as Pe,a$ as Ie,v as Fe,i as De,b0 as Ke,b1 as Ee,a5 as ve,a8 as q,ab as t,a6 as y,ad as v,ac as c,a9 as G,D as e,a4 as E,aa as de,ae as n,a7 as j,b2 as qe,af as ce,a3 as ye}from"../chunks/BitGGxQW.js";import{d as pe,s as S}from"../chunks/CKAymY6x.js";import{i as X}from"../chunks/Cb4_0wpw.js";import{e as Me}from"../chunks/BUgxogYU.js";import{b as W,i as C,s as fe,r as Z,a as Ne}from"../chunks/DK4AQOE3.js";import{s as he}from"../chunks/DUvWRxA9.js";import{p as Ue}from"../chunks/CqPrI6_m.js";function ge(l,s,a=!1){if(l.multiple){if(s==null)return;if(!De(s))return Ke();for(var i of l.options)i.selected=s.includes(ee(i));return}for(i of l.options){var r=ee(i);if(Ee(r,s)){i.selected=!0;return}}(!a||s!==void 0)&&(l.selectedIndex=-1)}function He(l){var s=new MutationObserver(()=>{ge(l,l.__value)});s.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Fe(()=>{s.disconnect()})}function Le(l,s,a=s){var i=!0;Pe(l,"change",r=>{var o=r?"[selected]":":checked",p;if(l.multiple)p=[].map.call(l.querySelectorAll(o),ee);else{var b=l.querySelector(o)??l.querySelector("option:not([disabled])");p=b&&ee(b)}a(p)}),Ie(()=>{var r=s();if(ge(l,r,i),i&&r===void 0){var o=l.querySelector(":checked");o!==null&&(r=ee(o),a(r))}l.__value=r,i=!1}),He(l)}function ee(l){return"__value"in l?l.__value:l.value}async function Oe(l,s,a,i,r){if(!e(s).trim()){t(a,"error"),t(i,"API key cannot be empty");return}t(a,"saving"),t(i,"");try{await C("save_api_key",{apiKey:e(s).trim()}),t(r,e(s).trim(),!0),t(a,"success"),t(i,"API key saved successfully"),setTimeout(()=>{e(a)==="success"&&(t(a,"idle"),t(i,""))},3e3)}catch(o){t(a,"error"),t(i,`Failed to save: ${o}`)}}async function Be(l,s,a,i,r){const o=e(s).trim()||e(a);if(!o){t(i,"error"),t(r,"No API key to test");return}t(i,"testing"),t(r,"Testing API key...");try{await C("test_api_key",{apiKey:o})?(t(i,"success"),t(r,"‚úì API key is valid")):(t(i,"error"),t(r,"API key is invalid")),setTimeout(()=>{(e(i)==="success"||e(i)==="error")&&(t(i,"idle"),t(r,""))},3e3)}catch(p){t(i,"error"),t(r,`Test failed: ${p}`)}}async function Ge(l,s,a,i,r){if(confirm("Are you sure you want to delete the API key?"))try{await C("delete_api_key"),t(s,""),t(a,""),t(i,"success"),t(r,"API key deleted"),setTimeout(()=>{t(i,"idle"),t(r,"")},2e3)}catch(o){t(i,"error"),t(r,`Failed to delete: ${o}`)}}var $e=(l,s)=>t(s,!e(s)),Ve=q("<div> </div>"),Ye=q(`<div class="api-key-section svelte-1t37msd"><h2 class="svelte-1t37msd">Anthropic API Key</h2> <p class="description svelte-1t37msd">Your API key is stored securely in the system keychain.
    Get your key from <a href="https://console.anthropic.com/settings/keys" target="_blank" class="svelte-1t37msd">Anthropic Console</a>.</p> <div class="input-group svelte-1t37msd"><div class="input-wrapper svelte-1t37msd"><input placeholder="sk-ant-..." class="api-key-input svelte-1t37msd"/> <button class="toggle-visibility svelte-1t37msd" type="button"> </button></div> <div class="button-group svelte-1t37msd"><button class="btn btn-primary svelte-1t37msd"> </button> <button class="btn btn-secondary svelte-1t37msd"> </button> <button class="btn btn-danger svelte-1t37msd">Delete</button></div></div> <!></div>`);function je(l,s){ve(s,!0);let a=y(""),i=y(""),r=y(!1),o=y("idle"),p=y("");async function b(){try{const u=await C("get_api_key");u&&(t(i,u,!0),t(a,u,!0))}catch(u){console.error("Failed to load API key:",u)}}b();var _=Ye(),h=v(c(_),4),T=c(h),m=c(T);Z(m);var w=v(m,2);w.__click=[$e,r];var M=c(w,!0);n(w),n(T);var N=v(T,2),x=c(N);x.__click=[Oe,a,o,p,i];var B=c(x,!0);n(x);var P=v(x,2);P.__click=[Be,a,i,o,p];var U=c(P,!0);n(P);var I=v(P,2);I.__click=[Ge,a,i,o,p],n(N),n(h);var F=v(h,2);{var K=u=>{var g=Ve();let D;var H=c(g,!0);n(g),G(L=>{D=he(g,1,"message svelte-1t37msd",null,D,L),S(H,e(p))},[()=>({success:e(o)==="success",error:e(o)==="error"})]),E(u,g)};X(F,u=>{e(p)&&u(K)})}n(_),G((u,g)=>{fe(m,"type",e(r)?"text":"password"),m.disabled=e(o)==="saving"||e(o)==="testing",fe(w,"title",e(r)?"Hide key":"Show key"),S(M,e(r)?"üôà":"üëÅÔ∏è"),x.disabled=u,S(B,e(o)==="saving"?"Saving...":"Save"),P.disabled=g,S(U,e(o)==="testing"?"Testing...":"Test"),I.disabled=e(o)==="saving"||e(o)==="testing"||!e(i)},[()=>e(o)==="saving"||e(o)==="testing"||!e(a).trim(),()=>e(o)==="saving"||e(o)==="testing"||!e(a).trim()&&!e(i)]),W(m,()=>e(a),u=>t(a,u)),E(l,_),de()}pe(["click"]);async function ze(l,s,a,i,r,o,p,b,_,h){var T;if(!e(s).trim()){t(a,"error"),t(i,"Template name is required");return}if(!e(r).trim()){t(a,"error"),t(i,"Prompt text is required");return}if(!(!e(r).includes("{clipboard_text}")&&!confirm("Your prompt doesn't contain {clipboard_text} placeholder. Continue anyway?"))){t(a,"saving"),t(i,"");try{const m={id:o||crypto.randomUUID(),name:e(s).trim(),description:e(p).trim(),prompt:e(r).trim(),hotkey:e(b).trim()||null,created_at:((T=_())==null?void 0:T.created_at)||new Date().toISOString()};await C("save_template",{template:m}),t(a,"idle"),h.onSave&&h.onSave(m)}catch(m){t(a,"error"),t(i,`Failed to save template: ${m}`)}}}var Je=(l,s)=>l.key==="Escape"&&s(),Qe=l=>l.stopPropagation(),Re=l=>l.stopPropagation(),We=q("<div> </div>"),Xe=q('<div class="modal-backdrop svelte-p5t8y5" role="button" tabindex="-1" aria-label="Close modal"><div class="modal svelte-p5t8y5" role="dialog" aria-modal="true" tabindex="0"><div class="modal-header svelte-p5t8y5"><h2 class="svelte-p5t8y5"> </h2> <button class="close-button svelte-p5t8y5">&times;</button></div> <div class="modal-body svelte-p5t8y5"><div class="form-group svelte-p5t8y5"><label for="name" class="svelte-p5t8y5">Template Name *</label> <input id="name" type="text" placeholder="e.g., Fix Grammar" class="input svelte-p5t8y5"/></div> <div class="form-group svelte-p5t8y5"><label for="description" class="svelte-p5t8y5">Description</label> <input id="description" type="text" placeholder="Brief description of what this template does" class="input svelte-p5t8y5"/></div> <div class="form-group svelte-p5t8y5"><label for="prompt" class="svelte-p5t8y5">Prompt Template *</label> <textarea id="prompt" placeholder="Enter your prompt here. Use {clipboard_text} to insert clipboard content." class="textarea svelte-p5t8y5" rows="8"></textarea> <span class="hint svelte-p5t8y5">Use <code class="svelte-p5t8y5">&#123;clipboard_text&#125;</code> to insert clipboard content in your prompt.</span></div> <div class="form-group svelte-p5t8y5"><label for="hotkey" class="svelte-p5t8y5">Hotkey (Optional)</label> <input id="hotkey" type="text" placeholder="e.g., Cmd+Shift+G or Ctrl+Alt+F" class="input svelte-p5t8y5"/> <span class="hint svelte-p5t8y5">Leave empty to assign later. Format: Cmd/Ctrl+Shift+Key</span></div> <!></div> <div class="modal-footer svelte-p5t8y5"><button class="btn btn-secondary svelte-p5t8y5">Cancel</button> <button class="btn btn-primary svelte-p5t8y5"> </button></div></div></div>');function Ze(l,s){var ie,d,A,O,se;ve(s,!0);let a=Ue(s,"template",3,null),i=j(((ie=a())==null?void 0:ie.id)||""),r=y(j(((d=a())==null?void 0:d.name)||"")),o=y(j(((A=a())==null?void 0:A.description)||"")),p=y(j(((O=a())==null?void 0:O.prompt)||"")),b=y(j(((se=a())==null?void 0:se.hotkey)||"")),_=y("idle"),h=y(""),T=!!a();function m(){s.onCancel&&s.onCancel()}var w=Xe();w.__click=m,w.__keydown=[Je,m];var M=c(w);M.__click=[Qe],M.__keydown=[Re];var N=c(M),x=c(N),B=c(x,!0);n(x);var P=v(x,2);P.__click=m,n(N);var U=v(N,2),I=c(U),F=v(c(I),2);Z(F),n(I);var K=v(I,2),u=v(c(K),2);Z(u),n(K);var g=v(K,2),D=v(c(g),2);qe(D),ce(2),n(g);var H=v(g,2),L=v(c(H),2);Z(L),ce(2),n(H);var $=v(H,2);{var te=f=>{var k=We();let Y;var J=c(k,!0);n(k),G(Q=>{Y=he(k,1,"message svelte-p5t8y5",null,Y,Q),S(J,e(h))},[()=>({error:e(_)==="error"})]),E(f,k)};X($,f=>{e(h)&&f(te)})}n(U);var ae=v(U,2),z=c(ae);z.__click=m;var V=v(z,2);V.__click=[ze,r,_,h,p,i,o,b,a,s];var le=c(V,!0);n(V),n(ae),n(M),n(w),G(()=>{S(B,T?"Edit Template":"Create New Template"),F.disabled=e(_)==="saving",u.disabled=e(_)==="saving",D.disabled=e(_)==="saving",L.disabled=e(_)==="saving",z.disabled=e(_)==="saving",V.disabled=e(_)==="saving",S(le,e(_)==="saving"?"Saving...":T?"Update":"Create")}),W(F,()=>e(r),f=>t(r,f)),W(u,()=>e(o),f=>t(o,f)),W(D,()=>e(p),f=>t(p,f)),W(L,()=>e(b),f=>t(b,f)),E(l,w),de()}pe(["click","keydown"]);function be(l,s,a){t(s,null),t(a,!0)}async function et(l,s,a){t(s,!0);try{e(a)?(await C("disable_autostart"),t(a,!1)):(await C("enable_autostart"),t(a,!0))}catch(i){console.error("Failed to toggle auto-launch:",i),alert(`Failed to change auto-launch setting: ${i}`)}finally{t(s,!1)}}var tt=q('<div class="empty-state svelte-1i19ct2"><p class="svelte-1i19ct2">No templates yet. Create your first template to get started!</p> <button class="btn btn-primary svelte-1i19ct2">+ Add Template</button></div>'),at=q('<span class="hotkey-badge svelte-1i19ct2"> </span>'),it=(l,s,a)=>s(e(a)),st=(l,s,a)=>s(e(a).id),lt=q('<div class="template-item svelte-1i19ct2"><div class="template-header svelte-1i19ct2"><h3 class="svelte-1i19ct2"> </h3> <!></div> <p class="template-description svelte-1i19ct2"> </p> <div class="template-preview svelte-1i19ct2"><code class="svelte-1i19ct2"> </code></div> <div class="template-actions svelte-1i19ct2"><button class="btn-small btn-secondary svelte-1i19ct2">Edit</button> <button class="btn-small btn-danger svelte-1i19ct2">Delete</button></div></div>'),rt=q('<div class="templates-list svelte-1i19ct2"></div> <button class="btn btn-primary svelte-1i19ct2">+ Add Template</button>',1),ot=q('<main class="container svelte-1i19ct2"><div class="header svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <a href="/" class="back-link svelte-1i19ct2">‚Üê Back to Home</a></div> <p class="subtitle svelte-1i19ct2">Configure your API key, prompt templates, and hotkeys.</p> <div class="settings-sections svelte-1i19ct2"><!> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Default Model</h2> <p class="description svelte-1i19ct2">Choose the Claude model to use for processing prompts.</p> <select class="model-select svelte-1i19ct2"><option>Claude 3.5 Haiku (Fast & Cost-Effective)</option><option>Claude 3.5 Sonnet (Balanced)</option><option>Claude 3 Opus (Most Capable)</option></select></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Application Settings</h2> <p class="description svelte-1i19ct2">Configure application behavior and preferences.</p> <div class="setting-item svelte-1i19ct2"><div class="setting-info svelte-1i19ct2"><strong class="svelte-1i19ct2">Launch at Login</strong> <p class="setting-hint svelte-1i19ct2">Automatically start the app when you log in to your computer.</p></div> <label class="toggle-switch svelte-1i19ct2"><input type="checkbox" class="svelte-1i19ct2"/> <span class="toggle-slider svelte-1i19ct2"></span></label></div></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Prompt Templates</h2> <p class="description svelte-1i19ct2">Create and manage prompt templates with custom hotkeys.</p> <!></section></div></main> <!>',1);function yt(l,s){ve(s,!0);let a=y(j([])),i=y("claude-3-5-haiku-20241022"),r=y(!1),o=y(null),p=null,b=y(!1),_=y(!1);async function h(){try{t(a,await C("get_templates"),!0),t(i,await C("get_default_model"),!0),t(b,await C("is_autostart_enabled"),!0)}catch(d){console.error("Failed to load settings:",d)}}async function T(){p&&clearTimeout(p),p=setTimeout(async()=>{try{await C("set_default_model",{model:e(i)}),console.log("Model updated:",e(i))}catch(d){console.error("Failed to save model:",d)}},500)}function m(d){t(o,d,!0),t(r,!0)}async function w(d){t(r,!1),t(o,null),await h()}function M(){t(r,!1),t(o,null)}async function N(d){if(confirm("Are you sure you want to delete this template?"))try{await C("delete_template",{id:d}),await h()}catch(A){console.error("Failed to delete template:",A),alert(`Failed to delete template: ${A}`)}}h();var x=ot(),B=ye(x),P=v(c(B),4),U=c(P);je(U,{});var I=v(U,2),F=v(c(I),4);F.__change=T;var K=c(F);K.value=K.__value="claude-3-5-haiku-20241022";var u=v(K);u.value=u.__value="claude-3-5-sonnet-20241022";var g=v(u);g.value=g.__value="claude-3-opus-20240229",n(F),n(I);var D=v(I,2),H=v(c(D),4),L=v(c(H),2),$=c(L);Z($),$.__change=[et,_,b],ce(2),n(L),n(H),n(D);var te=v(D,2),ae=v(c(te),4);{var z=d=>{var A=tt(),O=v(c(A),2);O.__click=[be,o,r],n(A),E(d,A)},V=d=>{var A=rt(),O=ye(A);Me(O,21,()=>e(a),f=>f.id,(f,k)=>{var Y=lt(),J=c(Y),Q=c(J),ke=c(Q,!0);n(Q);var we=v(Q,2);{var xe=R=>{var ne=at(),Se=c(ne,!0);n(ne),G(()=>S(Se,e(k).hotkey)),E(R,ne)};X(we,R=>{e(k).hotkey&&R(xe)})}n(J);var re=v(J,2),Ae=c(re,!0);n(re);var oe=v(re,2),ue=c(oe),Ce=c(ue);n(ue),n(oe);var _e=v(oe,2),me=c(_e);me.__click=[it,m,k];var Te=v(me,2);Te.__click=[st,N,k],n(_e),n(Y),G(R=>{S(ke,e(k).name),S(Ae,e(k).description||"No description"),S(Ce,`${R??""}${e(k).prompt.length>100?"...":""}`)},[()=>e(k).prompt.substring(0,100)]),E(f,Y)}),n(O);var se=v(O,2);se.__click=[be,o,r],E(d,A)};X(ae,d=>{e(a).length===0?d(z):d(V,!1)})}n(te),n(P),n(B);var le=v(B,2);{var ie=d=>{Ze(d,{get template(){return e(o)},onSave:w,onCancel:M})};X(le,d=>{e(r)&&d(ie)})}G(()=>{Ne($,e(b)),$.disabled=e(_)}),Le(F,()=>e(i),d=>t(i,d)),E(l,x),de()}pe(["change","click"]);export{yt as component};
