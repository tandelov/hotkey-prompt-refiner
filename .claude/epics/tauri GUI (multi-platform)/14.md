---
name: Auto-launch and platform-specific features
status: open
created: 2025-10-05T19:47:36Z
updated: 2025-10-05T19:51:23Z
github: https://github.com/tandelov/hotkey-prompt-refiner/issues/14
depends_on: [22, 19]
parallel: true
conflicts_with: []
---

# Task: Auto-launch and platform-specific features

## Description

Implement auto-launch functionality using tauri-plugin-autostart and handle platform-specific features like macOS Accessibility permissions detection and prompts. Add platform-specific UI polish and auto-start preference toggle in settings. Ensure graceful handling of permission requests and status checking.

## Acceptance Criteria

- [ ] tauri-plugin-autostart integrated and functional on all platforms
- [ ] Auto-start preference toggle in Settings UI
- [ ] macOS Accessibility permissions detected on first launch
- [ ] macOS permission prompt with clear instructions and "Open System Preferences" button
- [ ] Platform-specific UI polish applied (native look and feel)
- [ ] Auto-start works on macOS, Linux, and Windows

## Technical Details

**Implementation Approach:**
- Integrate `tauri-plugin-autostart` via Cargo.toml and Tauri config
- macOS: Use `AXIsProcessTrusted()` to check Accessibility permissions
- Display permission dialog on macOS if permissions not granted
- Auto-start toggle in Settings page saves preference and calls plugin APIs
- Platform detection for conditional UI elements

**Files Affected:**
- `src-tauri/Cargo.toml` - Add tauri-plugin-autostart dependency
- `src-tauri/tauri.conf.json` - Configure autostart plugin
- `src-tauri/src/main.rs` - Register autostart plugin
- `src-tauri/src/permissions.rs` (new) - macOS Accessibility check
- `src/components/Settings.tsx` - Auto-start toggle UI
- `src-tauri/src/commands.rs` - Commands for permission checking and opening system prefs

**Platform-Specific Logic:**
- macOS: Check `AXIsProcessTrusted()`, show dialog with link to System Preferences > Privacy & Security > Accessibility
- Windows: No special permissions needed
- Linux: Auto-start via .desktop file in `~/.config/autostart/`

**UI Polish:**
- macOS: Native window decorations, traffic lights positioning
- Linux: GTK-style controls
- Windows: Native title bar and controls

## Dependencies

- [x] Task 22: Settings UI (for auto-start toggle)
- [x] Task 19: Menu bar/system tray (for background operation context)
- [ ] tauri-plugin-autostart integrated
- [ ] Platform-specific permission APIs implemented

## Effort Estimate

**Size:** M
**Hours:** 10-14
**Parallel:** true (can run alongside Task 16 initially, but 16 needs this complete)

## Definition of Done

- [ ] Code implemented and committed
- [ ] Unit tests for permission checking logic
- [ ] Integration tests for auto-start enable/disable
- [ ] Manual testing on macOS (Accessibility permissions flow)
- [ ] Manual testing on Linux (autostart .desktop file)
- [ ] Manual testing on Windows (registry-based autostart)
- [ ] Documentation updated (permission requirements, auto-start setup)
- [ ] Code review completed
- [ ] Permission dialog UX reviewed and approved
- [ ] Auto-start verified after system reboot on all platforms
