---
name: Settings UI implementation
status: open
created: 2025-10-05T19:47:36Z
updated: 2025-10-05T19:51:23Z
github: https://github.com/tandelov/hotkey-prompt-refiner/issues/22
depends_on: [20, 21]
parallel: false
conflicts_with: []
---

# Task: Settings UI implementation

## Description

Build the complete Settings view with interactive components for API key management, template editing, and hotkey configuration. Create reusable Svelte components including ApiKeyInput with validation feedback, TemplateEditor with CRUD operations, and HotkeyRecorder with a "Press Key" capture interface. This task brings together the UI shell and backend commands to create a fully functional settings experience.

## Acceptance Criteria

- [ ] ApiKeyInput component validates and saves API keys with visual feedback
- [ ] TemplateEditor allows creating, editing, and deleting prompt templates
- [ ] HotkeyRecorder captures keyboard shortcuts with visual "Press Key" interface
- [ ] Settings persist across application restarts
- [ ] All components handle errors gracefully with user-friendly messages

## Technical Details

**Implementation Approach:**
1. Create component directory structure in `src-ui/components/`
2. Build ApiKeyInput component:
   - Password-style input field with show/hide toggle
   - "Test API Key" button that calls `test_api_key` command
   - Visual feedback (loading, success, error states)
   - Save/cancel actions
3. Build TemplateEditor component:
   - List view of existing templates
   - "New Template" button and edit forms
   - Textarea for prompt content with preview
   - Delete confirmation dialog
   - Calls `save_template`, `get_templates`, `delete_template` commands
4. Build HotkeyRecorder component:
   - "Press Key" button that enters capture mode
   - Keyboard event listener for hotkey combination
   - Display captured hotkey (e.g., "Cmd+Shift+]")
   - Clear/reset functionality
5. Integrate all components into Settings.svelte view
6. Add loading states and error handling for all async operations
7. Style components with consistent design system

**Files Affected:**
- `src-ui/views/Settings.svelte` - Main settings view (update placeholder)
- `src-ui/components/ApiKeyInput.svelte` - New component
- `src-ui/components/TemplateEditor.svelte` - New component
- `src-ui/components/HotkeyRecorder.svelte` - New component
- `src-ui/components/TemplateList.svelte` - New component (list display)
- `src-ui/components/TemplateForm.svelte` - New component (create/edit form)
- `src-ui/lib/api.js` - Helper functions to invoke Tauri commands
- `src-ui/lib/stores.js` - Svelte stores for reactive state management

**UI/UX Patterns:**
- Optimistic updates with rollback on error
- Toast notifications for success/error feedback
- Loading spinners during async operations
- Form validation before submission
- Keyboard shortcuts for power users

## Dependencies

### Task Dependencies
- [x] **20** - Tauri project scaffolding and Svelte UI setup (provides UI shell and routing)
- [x] **21** - Backend configuration system (provides Tauri commands for settings)

### External Dependencies
- [ ] Tauri invoke API for frontend-backend communication
- [ ] Svelte reactivity for state management

## Effort Estimate

**Size:** L

**Hours:** 8-10 hours

**Parallel:** false (depends on Tasks 20 and 21 completion)

**Breakdown:**
- ApiKeyInput component: 2-3 hours
- TemplateEditor and related components: 3-4 hours
- HotkeyRecorder component: 2 hours
- Integration and error handling: 2 hours
- Styling and polish: 1 hour

## Definition of Done

- [ ] All components render correctly and are responsive
- [ ] ApiKeyInput successfully tests and saves API keys
- [ ] TemplateEditor CRUD operations work end-to-end
- [ ] HotkeyRecorder captures and displays keyboard shortcuts
- [ ] Settings persist and load correctly on app restart
- [ ] Error states display helpful messages to users
- [ ] Loading states prevent duplicate submissions
- [ ] UI follows consistent design patterns
- [ ] Components are reusable and well-documented
- [ ] Manual testing completed on target platform(s)
- [ ] Code reviewed and committed
